Необходимо реализовать на языке Java (можно использовать 17 версию) класс для работы с API Честного знака. Класс должен быть thread-safe и поддерживать ограничение на количество запросов к API. Ограничение указывается в конструкторе в виде количества запросов в определенный интервал времени. Например:
public CrptApi(TimeUnit timeUnit, int requestLimit)
timeUnit – указывает промежуток времени – секунда, минута и пр.
requestLimit – положительное значение, которое определяет максимальное количество запросов в этом промежутке времени.

При превышении лимита запрос вызов должен блокироваться, чтобы не превысить максимальное количество запросов к API и продолжить выполнение, без выбрасывания исключения, когда ограничение на количество вызов API не будет превышено в результате этого вызова. В любой ситуации превышать лимит на количество запросов запрещено для метода.

Реализовать нужно единственный метод – Создание документа для ввода в оборот товара, произведенного в РФ. Документ и подпись должны передаваться в метод в виде Java объекта и строки соответственно.

Вызывается по HTTPS метод POST следующий URL:
https://ismp.crpt.ru/api/v3/lk/documents/create

В теле запроса передается в формате JSON документ: {"description": { "participantInn": "string" }, "doc_id": "string", "doc_status": "string", "doc_type": "LP_INTRODUCE_GOODS", 109 "importRequest": true, "owner_inn": "string", "participant_inn": "string", "producer_inn": "string", "production_date": "2020-01-23", "production_type": "string", "products": [ { "certificate_document": "string", "certificate_document_date": "2020-01-23", "certificate_document_number": "string", "owner_inn": "string", "producer_inn": "string", "production_date": "2020-01-23", "tnved_code": "string", "uit_code": "string", "uitu_code": "string" } ], "reg_date": "2020-01-23", "reg_number": "string"}

При реализации можно использовать библиотеки HTTP клиента, JSON сериализации. Реализация должна быть максимально удобной для последующего расширения функционала.

Решение должно быть оформлено в виде одного файла CrptApi.java. Все дополнительные классы, которые используются должны быть внутренними.

Можно прислать ссылку на файл в GitHub.
В задании необходимо просто сделать вызов указанного метода, реальный API не должен интересовать. 


Создайте новый проект Java в вашей среде разработки.
Создайте интерфейс с названием, например, “ICryptApi” и определите в нем метод “createDocumentForInvoicingGoodsProducedInRF(Document document, String signature)”. Этот метод должен создавать документ для ввода в оборот товаров, произведенных в РФ, используя предоставленные данные.
Реализуйте класс “CryptApi” с именем пакета, соответствующим вашему проекту. Добавьте необходимые импорты.
В конструкторе класса “CryptApi”, реализуйте логику ограничения количества запросов. Используйте TimeUnit и requestLimit для определения интервала времени и максимального количества запросов соответственно. При превышении лимита, блокируйте запрос, чтобы избежать превышения максимального количества запросов к API.
Реализуйте метод “createDocumentForInvoicingGoodsProducedInRF” в классе “CryptApi”. Используйте Java объект и строку для создания документа и подписи соответственно. Метод должен вызывать HTTPS POST метод следующего URL:
Импортируйте библиотеку “javax.ws.rs” и используйте классы “javax.ws.rs.client.Client”, “javax.ws.rs.core.Response”, “javax.ws.rs.POST”, "javax.ws.

Ограничение количества запросов можно реализовать с помощью двух переменных: количество уже выполненных запросов и максимальный лимит запросов.
В начале конструктора класса установите количество выполненных запросов в 0. Затем получите аргумент requestLimit и установите его в качестве максимального лимита запросов.
После этого, каждый раз, когда вы делаете запрос к API, увеличивайте количество выполненных запросов на 1.
Перед каждым запросом проверяйте, превышает ли количество выполненных запросов максимальный лимит. Если да, то заблокируйте запрос и верните ошибку, чтобы пользователь знал, что достигнут лимит запросов.

